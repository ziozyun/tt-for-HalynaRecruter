# Документація API

Цей документ надає інструкції з розгортання та огляд маршрутів API та їх функціональностей.

## Розгортання

1. Заповніть значення ```TELEGRAM_BOT_TOKEN```, ```TELEGRAM_CHAT_ID```, ```GOOGLE_SHEET_SPREADSHEET_ID```, ```GOOGLE_SHEET_ACCESS_TOKEN```, ```GOOGLE_SHEET_RANGE``` у файлі ```.env```.
2. Виконайте команду ```make up``` для запуску контейнерів.
3. Виконайте команду ```make install``` для встановлення залежностей.
4. Виконайте команду ```make migrate``` для запуску міграцій.
5. Виконайте команду ```make queue``` для запуску черги (необхідно для сповіщень в Telegram та додавання даних до Google Sheets).

## Маршрути аутентифікації

### `POST /login`
- **Опис:** Аутентифікація користувача та генерація токена.
- **Параметри:**
  - `username`: Обов'язково, рядок, ім'я користувача.
  - `password`: Обов'язково, рядок, пароль користувача.
- **Відповідь:**
  - `token`: Токен аутентифікації.
  - `user`: Деталі користувача.

### `POST /register`
- **Опис:** Реєстрація нового користувача та генерація токена.
- **Параметри:**
  - `username`: Обов'язково, рядок, унікальне ім'я користувача.
  - `name`: Обов'язково, рядок, повне ім'я користувача.
  - `email`: Обов'язково, рядок, унікальна електронна адреса.
  - `password`: Обов'язково, рядок, пароль (мінімум 6 символів).
- **Відповідь:**
  - `token`: Токен аутентифікації.
  - `user`: Деталі користувача.

### `POST /logout` (Аутентифіковано)
- **Опис:** Вихід користувача шляхом видалення його поточного токена.
- **Middleware:** `auth:sanctum`
- **Відповідь:**
  - `success`: Булеве значення, яке вказує на успіх операції.

### `GET /me` (Аутентифіковано)
- **Опис:** Повертає деталі аутентифікованого користувача.
- **Middleware:** `auth:sanctum`
- **Відповідь:**
  - `user`: Деталі аутентифікованого користувача.

---

## Маршрути для завдань (Аутентифіковано)

Ці маршрути потребують аутентифікації через middleware `auth:sanctum`.

### `GET /tasks`
- **Опис:** Отримує список завдань для аутентифікованого користувача з можливістю фільтрації.
- **Параметри (необов'язкові):**
  - `title`: Фільтрація за назвою завдання.
  - `status`: Фільтрація за статусом завдання (`true` для виконаних, `false` для не виконаних).
- **Відповідь:**
  - `data`: Список завдань із інформацією про сторінки.

### `POST /tasks`
- **Опис:** Створює нове завдання для аутентифікованого користувача.
- **Параметри:**
  - `title`: Обов'язково, рядок, назва завдання.
  - `description`: Обов'язково, рядок, опис завдання.
  - `status`: Обов'язково, булеве значення, статус завдання.
  - `due_date`: Необов'язково, дата, термін виконання завдання.
- **Відповідь:**
  - `task`: Деталі створеного завдання.

### `GET /tasks/{task}`
- **Опис:** Отримує конкретне завдання за ID.
- **Параметри:**
  - `task`: Обов'язково, ціле число, ID завдання.
- **Відповідь:**
  - `task`: Деталі завдання.

### `PUT /tasks/{task}`
- **Опис:** Оновлює завдання за ID.
- **Параметри:**
  - `task`: Обов'язково, ціле число, ID завдання.
  - `title`: Обов'язково, рядок, назва завдання.
  - `description`: Обов'язково, рядок, опис завдання.
  - `status`: Обов'язково, булеве значення, статус завдання.
  - `due_date`: Необов'язково, дата, термін виконання завдання.
- **Відповідь:**
  - `task`: Оновлені деталі завдання.

### `DELETE /tasks/{task}`
- **Опис:** Видаляє конкретне завдання за ID.
- **Параметри:**
  - `task`: Обов'язково, ціле число, ID завдання.
- **Відповідь:**
  - `task`: Видалене завдання.

### `PATCH /tasks/{task}/status`
- **Опис:** Оновлює статус завдання.
- **Параметри:**
  - `task`: Обов'язково, ціле число, ID завдання.
  - `status`: Обов'язково, булеве значення, новий статус завдання.
- **Відповідь:**
  - `task`: Оновлені деталі завдання.

### `GET /tasks/stats`
- **Опис:** Отримує загальну кількість завдань та кількість виконаних завдань для аутентифікованого користувача.
- **Відповідь:**
  - `total`: Загальна кількість завдань.
  - `completed`: Кількість виконаних завдань.

---

## Запити на валідацію

### TaskFilterRequest
Використовується для фільтрації завдань за `title` та `status`.

- `title`: Необов'язково, рядок, фільтрація за назвою завдання.
- `status`: Необов'язково, булеве значення, фільтрація за статусом.

### TaskRequest
Використовується для створення або оновлення завдань.

- `title`: Обов'язково, рядок, назва завдання.
- `description`: Обов'язково, рядок, опис завдання.
- `due_date`: Необов'язково, дата, термін виконання завдання.
- `status`: Обов'язково, булеве значення, статус завдання.

---